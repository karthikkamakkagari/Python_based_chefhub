{% extends "base.html" %}
{% block content %}

<style>
.page-container {
    max-width: 1200px;
    margin: auto;
    padding: 30px;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.actions-left {
    display: flex;
    gap: 10px;
}

.btn {
    padding: 7px 14px;
    border-radius: 6px;
    text-decoration: none;
    font-size: 14px;
    font-weight: 600;
}

.btn-primary { background: #667eea; color: white; }
.btn-success { background: #28a745; color: white; }
.btn-info { background: #17a2b8; color: white; }

.search-box input {
    padding: 8px 12px;
    width: 250px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

.table-container {
    background: white;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    padding: 20px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 12px;
    text-align: center;
    border-bottom: 1px solid #eee;
}

th {
    background-color: #667eea;
    color: white;
}
.btn {
    padding: 7px 14px;
    border-radius: 6px;
    text-decoration: none;
    font-size: 14px;
    font-weight: 600;
    display: inline-block;
    min-width: 70px;
    text-align: center;
    transition: 0.3s;
}

.btn-primary { background: #667eea; color: white; }
.btn-success { background: #28a745; color: white; }
.btn-info    { background: #17a2b8; color: white; }
.btn-warning { background: #f0ad4e; color: white; } /* darker orange */
.btn-danger  { background: #d9534f; color: white; } /* darker red */

.btn:hover {
    opacity: 0.85;
}

/* Smaller spacing for table buttons */
table .btn {
    padding: 5px 10px;
    font-size: 13px;
}
</style>

<div class="page-container">

    <h2>Customer List (Total: {{ customers|length }})</h2>

    <div class="top-bar">

        <div class="actions-left">
            <a href="{% url 'customer_add' %}" class="btn btn-primary">+ Add Customer</a>

            <a href="{% url 'import_customers' %}" class="btn btn-success">Import</a>
            <a href="{% url 'export_customers' %}" class="btn btn-info">Export</a>

        </div>

        <form method="GET" class="search-box">
            <input type="text" name="q" placeholder="Search by name..." value="{{ request.GET.q }}">
        </form>

    </div>

    <div class="table-container">

        <table>
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Persons</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for customer in customers %}
                <tr>
                    <td>
                        {% if customer.image %}
                            <img src="{{ customer.image.url }}" width="60" style="border-radius:8px;">
                        {% else %}
                            -
                        {% endif %}
                    </td>

                    <td>{{ customer.name }}</td>
                    <td>{{ customer.phone }}</td>
                    <td>{{ customer.num_person }}</td>

                    <td>
                        <a href="{% url 'generate_ingredient_list' customer.id %}" 
                        class="btn btn-success btn-sm">Generate</a>

                        <a href="{% url 'export_customer_pdf' customer.id %}" 
                        class="btn btn-info btn-sm">PDF</a>

                        <a href="{% url 'customer_edit' customer.id %}" 
                        class="btn btn-warning btn-sm">Edit</a>

                        <a href="{% url 'delete_customer' customer.id %}" 
                        class="btn btn-danger btn-sm"
                        onclick="return confirm('Are you sure you want to delete this customer?');">
                        Delete
                        </a>
                    </td>


                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No customers found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

</div>

{% endblock %}
